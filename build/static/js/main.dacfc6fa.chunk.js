(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),u=n(14),a=n.n(u),o=(n(19),n(3)),i=n(4),s=n.n(i),d="/api/persons",b={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},deleteNumber:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},updateNumber:function(e,t){return s.a.put("".concat(d,"/").concat(t),e).then((function(e){return e.data}))}},l=n(0),j=function(e){var t=e.message,n=e.error;return null===t?null:Object(l.jsx)("div",{className:n?"error":"notice",children:t})},f=function(e){var t=e.person,n=e.deleteNumber;return Object(l.jsxs)("div",{children:[t.name," ",t.number," ",Object(l.jsx)("input",{type:"button",value:"delete",onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&n(t.id)}})]})},h=function(e){var t=e.persons.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())}));return Object(l.jsx)("div",{children:t.map((function(t){return Object(l.jsx)(f,{person:t,deleteNumber:e.deleteNumber},t.id)}))})},m=function(e){return Object(l.jsxs)("form",{onSubmit:e.submit,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:e.handlers.name})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{onChange:e.handlers.number})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{onChange:e.handler})]})},p=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),a=Object(o.a)(u,2),i=a[0],s=a[1],d=Object(r.useState)(""),f=Object(o.a)(d,2),p=f[0],v=f[1],x=Object(r.useState)(""),g=Object(o.a)(x,2),w=g[0],N=g[1],C=Object(r.useState)(null),S=Object(o.a)(C,2),k=S[0],y=S[1],F=Object(r.useState)(!1),L=Object(o.a)(F,2),A=L[0],D=L[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];D(n),y(e),setTimeout((function(){y(null)}),t)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(j,{message:k,error:A}),Object(l.jsx)(O,{handler:function(e){N(e.target.value)}}),Object(l.jsx)("h3",{children:"add a new"}),Object(l.jsx)(m,{submit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===i}));if(0!==t.length){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var r={name:i,number:p};b.updateNumber(r,t[0].id).then((function(e){c(n.filter((function(t){return t.id!==e.id})).concat(e)),I("Updated ".concat(e.name),5e3)})).catch((function(e){I("Information of ".concat(r.name," has already been removed from server"),5e3,!0)}))}}else{var u={name:i,number:p};b.create(u).then((function(e){c(n.concat(e)),I("Added ".concat(e.name),5e3)}))}},handlers:{name:function(e){s(e.target.value)},number:function(e){v(e.target.value)}}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(h,{persons:n,filter:w,deleteNumber:function(e){b.deleteNumber(e).then(c(n.filter((function(t){return t.id!==e}))))}})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,u=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),u(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),v()}},[[39,1,2]]]);
//# sourceMappingURL=main.dacfc6fa.chunk.js.map